{"ast":null,"code":"import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport \"./listofprofiles.css\";\nimport React, { Component, useEffect } from \"react\";\nimport { StatusBar } from 'expo-status-bar';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Pressable from \"react-native-web/dist/exports/Pressable\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport { useState } from \"react-native-web/dist/index\";\nimport { Accordion, Button, ButtonGroup, Container, Figure, Form, ToggleButton, ToggleButtonGroup } from \"react-bootstrap\";\nimport placeholder from \"../assets/placeholder.png\";\nimport axios from 'axios';\nimport { Link } from \"react-router-dom\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar DataTable = function DataTable(props) {\n  return _jsxs(\"div\", {\n    class: \"col-lg-4 matchedOnPadding\",\n    children: [\" \", _jsx(Form.Control, {\n      class: \"form-control text-center\",\n      type: \"text\",\n      placeholder: props.obj,\n      disabled: true\n    })]\n  });\n};\n\nvar ListProfiles = function (_Component) {\n  _inherits(ListProfiles, _Component);\n\n  var _super = _createSuper(ListProfiles);\n\n  function ListProfiles(props) {\n    var _this;\n\n    _classCallCheck(this, ListProfiles);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      loginEmail: \"def@email.com\",\n      userEmail: \"\",\n      userInfo: {},\n      userHobbies: {}\n    };\n    return _this;\n  }\n\n  _createClass(ListProfiles, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var loginEmail = this.state.loginEmail;\n      var getMatches = axios.get('http://localhost:5000/matches');\n      var getPreferences = axios.get('http://localhost:5000/preferences');\n      var userPreferences = axios.get('http://localhost:5000/preferences/find/' + loginEmail);\n      axios.all([getMatches, getPreferences, userPreferences]).then(axios.spread(function () {\n        for (var _len = arguments.length, responses = new Array(_len), _key = 0; _key < _len; _key++) {\n          responses[_key] = arguments[_key];\n        }\n\n        var allMatches = responses[0].data;\n        var allPreferences = responses[1].data;\n        var myPreferences = responses[2].data[0];\n        var pastUsers = [];\n\n        for (var i in allMatches) {\n          if (allMatches[i][\"from_email\"] == loginEmail) {\n            var pastUser = allMatches[i][\"to_email\"];\n            pastUsers.push(pastUser);\n          }\n\n          if (allMatches[i][\"to_email\"] == loginEmail && !allMatches[i][\"ismatch\"]) {\n            var _pastUser = allMatches[i][\"from_email\"];\n            pastUsers.push(_pastUser);\n          }\n        }\n\n        var hobbiesMatch = {};\n        var listPreferences = Object.keys(allPreferences[0]);\n        listPreferences.shift();\n        listPreferences.shift();\n        var numPreferences = listPreferences.length;\n\n        while (numPreferences > -1) {\n          hobbiesMatch[numPreferences] = [];\n          numPreferences--;\n        }\n\n        var userHobbies = [];\n        var numMatches = 0;\n\n        for (var _i in allPreferences) {\n          if (!pastUsers.includes(allPreferences[_i][\"email\"]) && allPreferences[_i][\"email\"] != loginEmail) {\n            var numCommon = 0;\n            userHobbies[allPreferences[_i][\"email\"]] = [];\n\n            for (var j in listPreferences) {\n              if (allPreferences[_i][listPreferences[j]]) {\n                userHobbies[allPreferences[_i][\"email\"]].push(listPreferences[j]);\n              }\n\n              if (myPreferences[listPreferences[j]] && allPreferences[_i][listPreferences[j]] == myPreferences[listPreferences[j]]) {\n                numCommon++;\n              }\n            }\n\n            numMatches++;\n            hobbiesMatch[numCommon].push(allPreferences[_i][\"email\"]);\n          }\n        }\n\n        if (numMatches != 0) {\n          numPreferences = listPreferences.length;\n\n          while (numPreferences > -1 && hobbiesMatch[numPreferences].length == 0) {\n            numPreferences--;\n          }\n\n          _this2.setState({\n            userEmail: hobbiesMatch[numPreferences][0]\n          });\n\n          _this2.setState({\n            userHobbies: userHobbies[hobbiesMatch[numPreferences][0]]\n          });\n\n          var getUser = \"http://localhost:5000/users/get/\" + hobbiesMatch[numPreferences][0];\n          return axios.get(getUser);\n        } else {\n          _this2.setState({\n            userEmail: _this2.state.loginEmail\n          });\n\n          _this2.setState({\n            userHobbies: []\n          });\n\n          var getUser = \"http://localhost:5000/users/get/\" + _this2.state.userEmail;\n          return axios.get(getUser);\n        }\n      })).then(function (response) {\n        if (response.data[0][\"email\"] == _this2.state.loginEmail) {\n          var noUserInfo = response.data[0];\n          noUserInfo[\"name\"] = \"No potential matches remaining\";\n          noUserInfo[\"pictures\"] = [require(\"../assets/anonprofile.png\")];\n          noUserInfo[\"desc\"] = \"Why not recommend our app? :)\";\n\n          _this2.setState({\n            userInfo: noUserInfo\n          });\n        } else {\n          _this2.setState({\n            userInfo: response.data[0]\n          });\n        }\n\n        return _this2.state;\n      }).catch(function (error) {\n        console.log(error);\n      });\n    }\n  }, {\n    key: \"postmatch\",\n    value: function postmatch(isMatch) {\n      if (isMatch) {\n        var postStr = 'http://localhost:5000/matches/create/' + this.state.loginEmail + '/' + this.state.userEmail + '/true';\n        axios.post(postStr).then(function (response) {\n          console.log(response);\n        }, function (error) {\n          console.log(error);\n        });\n      } else {\n        var postStr = 'http://localhost:5000/matches/create/' + this.state.loginEmail + '/' + this.state.userEmail + '/false';\n        axios.post(postStr).then(function (response) {\n          console.log(response);\n        }, function (error) {\n          console.log(error);\n        });\n      }\n\n      window.location.reload(false);\n    }\n  }, {\n    key: \"hobbies\",\n    value: function hobbies() {\n      var hobbys = Array.from(this.state.userHobbies);\n      return hobbys.map(function (data, i) {\n        return _jsx(DataTable, {\n          obj: data\n        }, i);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return _jsxs(\"main\", {\n        children: [_jsx(\"head\", {}), _jsx(\"body\", {\n          children: _jsxs(Container, {\n            children: [_jsx(Figure.Image, {\n              className: \"mx-auto d-block profileimages-image img-fluid\",\n              style: {\n                justifyContent: 'flex-center'\n              },\n              src: \"\" + this.state.userInfo.pictures\n            }), _jsx(\"p\", {\n              class: \"text-center\",\n              style: {\n                fontSize: 30\n              },\n              children: this.state.userInfo.name\n            }), _jsx(Form, {\n              children: _jsx(Form.Group, {\n                className: \"hobbiesFormatting\",\n                children: _jsx(\"div\", {\n                  class: \"row matchedOnPadding\",\n                  children: this.hobbies()\n                })\n              })\n            }), _jsx(Container, {\n              children: _jsx(ScrollView, {\n                children: _jsx(Text, {\n                  style: {\n                    fontSize: 18\n                  },\n                  children: this.state.userInfo.desc\n                })\n              })\n            }), _jsxs(\"div\", {\n              class: \"btn-group d-flex\",\n              role: \"group\",\n              \"aria-label\": \"buttons for matching\",\n              children: [_jsx(\"button\", {\n                type: \"button\",\n                onClick: function onClick() {\n                  return _this3.postmatch(false);\n                },\n                className: \"btn btn-circle\",\n                children: _jsx(Figure.Image, {\n                  className: \"customNavImage\",\n                  src: require(\"../assets/xIcon.png\")\n                })\n              }), _jsx(\"button\", {\n                type: \"button\",\n                onClick: function onClick() {\n                  return _this3.postmatch(true);\n                },\n                className: \"btn btn-circle2\",\n                children: _jsx(Figure.Image, {\n                  className: \"customNavImage\",\n                  src: require(\"../assets/heartIcon.png\")\n                })\n              })]\n            })]\n          })\n        }), _jsxs(\"div\", {\n          class: \"btn-group d-flex customNavBar\",\n          role: \"group\",\n          \"aria-label\": \"navigational buttons\",\n          children: [_jsx(\"a\", {\n            href: \"/editprofile\",\n            button: true,\n            type: \"button\",\n            class: \"btn btn-secondary w-100 h-100 customNavSize\",\n            children: _jsx(Figure.Image, {\n              className: \"customNavImage\",\n              src: require(\"../assets/settingIcon.png\")\n            })\n          }), _jsx(\"a\", {\n            href: \"/profile\",\n            button: true,\n            type: \"button\",\n            class: \"btn btn-secondary w-100 h-100 customNavSize\",\n            children: _jsx(Figure.Image, {\n              className: \"customNavImage\",\n              src: require(\"../assets/profileIcon.png\")\n            })\n          }), _jsx(\"a\", {\n            href: \"/matches\",\n            button: true,\n            type: \"button\",\n            class: \"btn btn-secondary w-100 h-100 customNavSize\",\n            children: _jsx(Figure.Image, {\n              className: \"customNavImage\",\n              src: require(\"../assets/chatIcon.png\")\n            })\n          })]\n        })]\n      });\n    }\n  }]);\n\n  return ListProfiles;\n}(Component);\n\nexport { ListProfiles as default };","map":{"version":3,"sources":["C:/Users/Sage/Documents/GitHub/CampusDate/mern/campusdate/src/components/profile/profile.component.js"],"names":["React","Component","useEffect","StatusBar","useState","Accordion","Button","ButtonGroup","Container","Figure","Form","ToggleButton","ToggleButtonGroup","placeholder","axios","Link","DataTable","props","obj","ListProfiles","state","loginEmail","userEmail","userInfo","userHobbies","getMatches","get","getPreferences","userPreferences","all","then","spread","responses","allMatches","data","allPreferences","myPreferences","pastUsers","i","pastUser","push","hobbiesMatch","listPreferences","Object","keys","shift","numPreferences","length","numMatches","includes","numCommon","j","setState","getUser","response","noUserInfo","require","catch","error","console","log","isMatch","postStr","post","window","location","reload","hobbys","Array","from","map","justifyContent","pictures","fontSize","name","hobbies","desc","postmatch"],"mappings":"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","sourcesContent":["import './listofprofiles.css';\r\n// import * as React from 'react';\r\nimport React, { Component, useEffect} from \"react\";\r\nimport { StatusBar } from 'expo-status-bar';\r\nimport { StyleSheet, Text,  View, Alert, SafeAreaView, TouchableOpacity, Image, ScrollView, Pressable, Dimensions, useState} from 'react-native';\r\n// import { ScrollView } from 'react-native';\r\nimport { Accordion, Button, ButtonGroup, Container, Figure, Form, ToggleButton, ToggleButtonGroup } from \"react-bootstrap\";\r\nimport placeholder from \"../assets/placeholder.png\"\r\nimport axios from 'axios';\r\n\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst DataTable = props => (\r\n    <div class=\"col-lg-4 matchedOnPadding\"> {/* padding = spacing b/t the form boxes */}\r\n      <Form.Control class = \"form-control text-center\" type=\"text\"  placeholder={props.obj} disabled></Form.Control>\r\n    </div>\r\n)\r\n\r\nexport default class ListProfiles extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      \r\n      this.state = { loginEmail: \"def@email.com\", userEmail: \"\", userInfo: {}, userHobbies: {} };\r\n  }\r\n  componentDidMount() {    \r\n    const loginEmail = this.state.loginEmail\r\n    const getMatches = axios.get('http://localhost:5000/matches')    \r\n    const getPreferences = axios.get('http://localhost:5000/preferences')\r\n    const userPreferences = axios.get('http://localhost:5000/preferences/find/' + loginEmail);\r\n          axios.all([getMatches, getPreferences, userPreferences])\r\n          .then(axios.spread((...responses) => {\r\n            const allMatches = responses[0].data;\r\n            const allPreferences = responses[1].data;\r\n            const myPreferences = responses[2].data[0];\r\n            // get all emails of previously viewed users/users that have already rejected current user\r\n            var pastUsers = [];\r\n            for(let i in allMatches){\r\n              if(allMatches[i][\"from_email\"] == loginEmail){\r\n                const pastUser = allMatches[i][\"to_email\"];\r\n                pastUsers.push(pastUser);\r\n              }\r\n              if(allMatches[i][\"to_email\"] == loginEmail && !allMatches[i][\"ismatch\"]){\r\n                const pastUser = allMatches[i][\"from_email\"];\r\n                pastUsers.push(pastUser);                \r\n              }\r\n            }\r\n            // console.log(pastUsers)\r\n            // get list, total number of possible hobbies\r\n            var hobbiesMatch = {};\r\n            var listPreferences = Object.keys(allPreferences[0]);\r\n            listPreferences.shift();\r\n            listPreferences.shift();\r\n            // create dict for matching hobbies\r\n            var numPreferences = listPreferences.length;\r\n            while(numPreferences > -1){\r\n              hobbiesMatch[numPreferences] = [];\r\n              numPreferences--;\r\n            }\r\n            // get preference info from unviewed users; set in hobbiesMatch and userHobbies     \r\n            var userHobbies = []\r\n            var numMatches = 0;\r\n            for(let i in allPreferences){\r\n              if(!pastUsers.includes(allPreferences[i][\"email\"]) && allPreferences[i][\"email\"] != loginEmail){\r\n                var numCommon = 0;\r\n                userHobbies[allPreferences[i][\"email\"]] = []           \r\n                for(let j in listPreferences){\r\n                  if(allPreferences[i][listPreferences[j]]){\r\n                    userHobbies[allPreferences[i][\"email\"]].push(listPreferences[j]);\r\n                  }\r\n                  if(myPreferences[listPreferences[j]] && allPreferences[i][listPreferences[j]] == myPreferences[listPreferences[j]]){\r\n                    numCommon++;\r\n                  }                  \r\n                }\r\n                numMatches++;\r\n                hobbiesMatch[numCommon].push(allPreferences[i][\"email\"]);\r\n              }\r\n            }\r\n            if(numMatches != 0){\r\n            // get hobby and profile info on top user\r\n            numPreferences = listPreferences.length;\r\n            while(numPreferences > -1 && hobbiesMatch[numPreferences].length == 0){\r\n              numPreferences--;\r\n            }\r\n              this.setState({ userEmail: hobbiesMatch[numPreferences][0] });\r\n              this.setState({ userHobbies: userHobbies[hobbiesMatch[numPreferences][0]]});\r\n            var getUser = \"http://localhost:5000/users/get/\" + hobbiesMatch[numPreferences][0];\r\n            return axios.get(getUser);\r\n            }else{\r\n              this.setState({ userEmail: this.state.loginEmail });\r\n              this.setState({ userHobbies: [] });   \r\n              var getUser = \"http://localhost:5000/users/get/\" + this.state.userEmail;\r\n              return axios.get(getUser);        \r\n            }\r\n          })).then( response => {\r\n            if(response.data[0][\"email\"] == this.state.loginEmail){\r\n              var noUserInfo = response.data[0];\r\n              noUserInfo[\"name\"] = \"No potential matches remaining\";\r\n              noUserInfo[\"pictures\"] = [require('../assets/anonprofile.png')];\r\n              noUserInfo[\"desc\"] = \"Why not recommend our app? :)\";\r\n              this.setState({ userInfo: noUserInfo});\r\n            }else{\r\n              this.setState({ userInfo: response.data[0]});            \r\n            }\r\n            return this.state\r\n          }).catch(function (error) {\r\n              console.log(error);\r\n          })\r\n }\r\n  \r\n  postmatch(isMatch) {\r\n    if(isMatch){\r\n      var postStr = 'http://localhost:5000/matches/create/' + this.state.loginEmail +\r\n      '/' + this.state.userEmail + '/true'\r\n      axios.post(postStr).then((response) => {\r\n        console.log(response);\r\n      }, (error) => {\r\n        console.log(error);\r\n      });       \r\n    }else{\r\n      var postStr = 'http://localhost:5000/matches/create/' + this.state.loginEmail +\r\n      '/' + this.state.userEmail + '/false'\r\n      axios.post(postStr).then((response) => {\r\n        console.log(response);\r\n      }, (error) => {\r\n        console.log(error);\r\n      }); \r\n    }\r\n    window.location.reload(false);\r\n  \r\n  }\r\n\r\n  hobbies() {\r\n    var hobbys = Array.from(this.state.userHobbies);\r\n      return hobbys.map((data, i) => {\r\n          return <DataTable obj={data} key={i} />;\r\n      });\r\n  }\r\n\r\n  render() {\r\n\r\n\r\n  // const hobbies = [ {name:'hobby1', value:1}, {name:'hobby2', value:2}, {name:'hobby3', value:3},{name:'hobby4', value:4}, {name:'hobby5', value:5},{name:'hobby6', value:6},{name:'hobby7', value:7},{name:'hobby8', value:8},{name:'hobby9', value:9}]\r\n\r\n  return(\r\n\r\n    <main>\r\n      <head>\r\n     </head>\r\n      <body>\r\n        {/* <Container> */}\r\n        \r\n            {/* {this.matchesList()} */}\r\n\r\n\r\n      <Container> \r\n\r\n      {/* need access to src for profile pic >> does userInfo store that? */}\r\n      <Figure.Image className=\"mx-auto d-block profileimages-image img-fluid\" style = {{justifyContent: 'flex-center'}} src={`${this.state.userInfo.pictures}`}/>\r\n      \r\n      {/* trying to center using Text didnt work >> switched to p for now */}\r\n      <p class = \"text-center\" style = {{fontSize: 30}}>\r\n        {this.state.userInfo.name}\r\n      </p>\r\n        <Form>\r\n          <Form.Group className = \"hobbiesFormatting\">\r\n          <div class = \"row matchedOnPadding\">\r\n          {this.hobbies()}\r\n          </div>\r\n          </Form.Group>\r\n        </Form>\r\n      <Container>\r\n        <ScrollView>\r\n          <Text style = {{fontSize: 18}}>\r\n            {this.state.userInfo.desc}\r\n          </Text>\r\n        </ScrollView>\r\n      </Container>\r\n\r\n          {/* buttons for matching >> left = dont want to match, right = want to match */}\r\n          <div class = \"btn-group d-flex\" role = \"group\" aria-label='buttons for matching'>\r\n            <button type = \"button\" onClick={() => this.postmatch(false)} className = \"btn btn-circle\"><Figure.Image className = \"customNavImage\" src={require('../assets/xIcon.png')}></Figure.Image></button>\r\n            <button type = \"button\" onClick={() => this.postmatch(true)} className = \"btn btn-circle2\"><Figure.Image className = \"customNavImage\" src={require('../assets/heartIcon.png')}></Figure.Image></button>\r\n\r\n          </div>\r\n\r\n          </Container>\r\n          \r\n        {/* </Container> */}\r\n\r\n      </body>\r\n\r\n       {/* navigational buttons at bottom of the page w/ links, class has info of aesthetics of buttons */}\r\n       <div class=\"btn-group d-flex customNavBar\" role=\"group\" aria-label=\"navigational buttons\">\r\n            <a href = \"/editprofile\" button type=\"button\" class=\"btn btn-secondary w-100 h-100 customNavSize\"><Figure.Image className = \"customNavImage\" src={require('../assets/settingIcon.png')}></Figure.Image></a>\r\n            <a href = \"/profile\" button type=\"button\" class=\"btn btn-secondary w-100 h-100 customNavSize\"><Figure.Image className = \"customNavImage\" src={require('../assets/profileIcon.png')}></Figure.Image></a>\r\n            <a href = \"/matches\" button type=\"button\" class=\"btn btn-secondary w-100 h-100 customNavSize\"><Figure.Image className = \"customNavImage\" src={require('../assets/chatIcon.png')}></Figure.Image></a>\r\n        </div>\r\n\r\n       \r\n    </main>\r\n\r\n  )\r\n  \r\n  }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}